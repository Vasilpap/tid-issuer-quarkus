# Configuration file

# --- disable DevServices (we?re managing the container ourselves) ---
quarkus.devservices.enabled=false

# --- JDBC / datasource setup ---
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=quarkus
quarkus.datasource.password=quarkus
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkusdb

# --- Hibernate / schema generation ---
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true

#quarkus.oidc.auth-server-url=http://localhost:8090/realms/quarkus
#
#quarkus.oidc.client-id=tid-issuer-be
#quarkus.oidc.credentials.secret=
#
#quarkus.http.cors=true
#quarkus.http.cors.origins=http://localhost:5173
#quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
#quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
#

###################################
# 2. Keycloak / OIDC integration #
###################################

# 2.1 URL of your Keycloak server + realm
#    - in dev mode Keycloak?s base path is "/" not "/auth"
#    - replace ?master? with your realm name if different
quarkus.oidc.auth-server-url=http://localhost:8180/realms/quarkus-realm

# 2.2 Client registration in Keycloak:
#   ? client-id must match your Keycloak client
#   ? secret is the one you set in the ?Credentials? tab
quarkus.oidc.client-id=quarkus-app
quarkus.oidc.credentials.secret=REDACTED

# 2.3 Tell Quarkus you?re a web application (so it uses the standard code-flow)
quarkus.oidc.application-type=service

# 2.4 Disable TLS verification in dev (not for production!)
quarkus.oidc.tls.verification=none

# 2.5 (Optional) Require authentication on all routes by default
#quarkus.http.auth.permission.authenticated.paths=/*
#quarkus.http.auth.permission.authenticated.policy=authenticated

# (Optional) turn off any form-based auth
quarkus.http.auth.form.enabled=false
# ***Not optimal - best practice - kc correct audience
quarkus.oidc.token.audience=any

################################
# 3. HTTP & session settings   #
################################

# 3.1 HTTP port (default 8080)?override only if you need to
#quarkus.http.port=8080

# 3.2 Use cookie-based sessions for your web-app
quarkus.http.auth.session.cookie=true

# === CORS ===
quarkus.http.cors.enabled=true
quarkus.http.cors.origins = http://localhost:5173
quarkus.http.cors.methods = GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers = origin, accept, authorization, content-type
quarkus.http.cors.access-control-allow-credentials = true

# DEBUG console logging
quarkus.log.console.enable=true
#quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}]] (%t) %s%e%n
#quarkus.log.console.level=DEBUG

# TRACE file logging
quarkus.log.file.enable=true
#quarkus.log.file.path=/tmp/trace.log
#quarkus.log.file.level=TRACE
#quarkus.log.file.format=%d{HH:mm:ss} %-5p [%c{2.}]] (%t) %s%e%n
#quarkus.log.category."io.quarkus.smallrye.jwt".level=TRACE
#quarkus.log.category."io.undertow.request.security".level=TRACE
#quarkus.log.category."io.smallrye.jwt".level=TRACE

#quarkus.log.category."io.quarkus.oidc.runtime.OidcProvider".level=TRACE
#quarkus.log.category."io.quarkus.oidc.runtime.OidcProvider".min-level=TRACE


quarkus.http.cors=true
