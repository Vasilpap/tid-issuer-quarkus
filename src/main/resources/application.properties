# === HTTP / proxy ===
quarkus.http.port=${QUARKUS_HTTP_PORT:8080}
quarkus.http.proxy.proxy-address-forwarding=true

# === DB (use Quarkus' native env var names) ===
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${QUARKUS_DATASOURCE_JDBC_URL:jdbc:postgresql://localhost:5432/quarkusdb}
quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME:}
quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD:}
quarkus.datasource.jdbc.max-size=${QUARKUS_DATASOURCE_JDBC_MAX_SIZE:20}

# === Hibernate ===
%dev.quarkus.hibernate-orm.database.generation=update
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%prod.quarkus.hibernate-orm.database.generation=validate
quarkus.hibernate-orm.log.sql=${QUARKUS_LOG_SQL:false}

# === Keycloak / OIDC (no default secrets!) ===
quarkus.oidc.application-type=service
quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL:http://localhost:8180/realms/quarkus-realm}
quarkus.oidc.client-id=${QUARKUS_OIDC_CLIENT_ID:}
quarkus.oidc.credentials.secret=${QUARKUS_OIDC_CREDENTIALS_SECRET:}
%prod.quarkus.oidc.tls.verification=required
%dev.quarkus.oidc.tls.verification=${KEYCLOAK_TLS_VERIFY:none}
quarkus.oidc.roles.source=accesstoken

# === CORS ===
quarkus.http.cors=true
quarkus.http.cors.origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=origin,accept,authorization,content-type
quarkus.http.cors.access-control-allow-credentials=true

# === Health / OpenAPI (optional) ===
quarkus.smallrye-health.root-path=/q/health
quarkus.smallrye-openapi.path=/q/openapi

# === Logging ===
quarkus.log.console.enable=true
quarkus.log.file.enable=${QUARKUS_LOG_FILE_ENABLE:false}
quarkus.log.file.path=${QUARKUS_LOG_FILE_PATH:/var/log/tid-issuer/application.log}
quarkus.log.file.rotation.max-file-size=10M
quarkus.log.file.rotation.max-backup-index=5
